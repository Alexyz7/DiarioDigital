@model IEnumerable<DiarioDigital.Comentarios>


@{

    Layout = null;


}



<script>








        //$(document).on("click", ".tocar", function () {

        //    $(this).next('.class').toggle();

        //});
  

    $(document).ready(function () {
        $('.tocar').click(function () {
            $(this).closest('.class').toggle();
        });
    });
 
    
   
  
</script>


<script>

    function funcion2() {
        var x = document.getElementById("mc");

        if (x.style.display === "none") {
            x.style.display = "block";
        } else {
            x.style.display = "none";
        }
    }

</script>






@foreach (var item in Model)
{





    <div class="container" style="padding-top:10px">

        <div class="row" style="background-color:white">
            @Html.HiddenFor(modelItem => item.Idcoment)

            <div class="d-flex" style="color:cornflowerblue">

                <div class="p-2 flex-grow-1">@Html.DisplayFor(modelItem => item.Usuarios.Nombre) </div> <div class="p-2">@item.DateComent</div>
            </div>

            <div class="d-flex align-items-center">

                <div class="flex-shrink-0 align-self-start"> <img src="~/Content/Imagenes/user1.jpg" width="61" height="61"></div>
                <div class="flex-grow-1 ms-3" style="background-color:white">@Html.DisplayFor(modelItem => item.comentario) </div>

            </div>


            @if (User.Identity.IsAuthenticated)

            {

                DiarioOnlineEntities db = new DiarioOnlineEntities();
                var useractual = db.Usuarios.FirstOrDefault(x => x.Email == System.Web.HttpContext.Current.User.Identity.Name).Nombre;



                if (useractual == item.Usuarios.Nombre)

                {

                    <div class="d-flex justify-content-center">
                        <div class="flex-shrink-0 align-self-start"> @Html.Action("BorrarComent", "Comentarios", new { id = item.Idcoment })</div>
                        <button onclick="funcion2()" type="button">Editar comentario</button>
                    </div>
                  <div id="mc" class="col-md-12" style="display:none">@Html.Action("Edit", "Comentarios", new { id = item.Idcoment })</div>


                }

                <div class="class"  style="display:none">
                    @Html.Action("Subcoment", "Comentarios", new { id = item.Idcoment })
                </div>
                <div class="col"><button class="tocar" type="button" data-id="@item.Idcoment" onclick="myFun(this)">Responder</button></div>


            }


            @if (item.Subcomentarios != null)
            {

                <div class="col-md-12"> @Html.Action("Mostrarsub", "Comentarios", new { id = item.Idcoment }) </div>



            }


        </div>
    </div>
}




@*<div class="flex-grow-1 ms-3">  <button onclick="myFunction()" type="button">Responder</button></div>*@

















